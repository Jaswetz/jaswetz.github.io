{"mappings":"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","sources":["src/js/clarity-config.js","node_modules/@swc/helpers/esm/_define_property.js","node_modules/@swc/helpers/esm/_object_spread.js","node_modules/@swc/helpers/esm/_object_spread_props.js","src/js/analytics/simple-analytics.js","src/js/smart-image-loader.js","src/js/components/site-header/SiteHeader.js","src/js/components/site-footer/SiteFooter.js","src/js/components/sidebar-navigation/SidebarNavigation.js","src/js/components/ImageLightbox/ImageLightbox.js","src/js/main.js"],"sourcesContent":["/**\n * Microsoft Clarity Advanced Configuration\n * Enhanced tracking for conversion funnel analysis and user journey optimization\n */\n\n// Microsoft Clarity tracking code with enhanced configuration\n(function (c, l, a, r, i, t, y) {\n  // Only load in production\n  if (\n    window.location.hostname === \"localhost\" ||\n    window.location.hostname === \"127.0.0.1\" ||\n    window.location.port !== \"\"\n  ) {\n    c[a] = () => {};\n    return;\n  }\n\n  c[a] =\n    c[a] ||\n    function () {\n      (c[a].q = c[a].q || []).push(arguments);\n    };\n  t = l.createElement(r);\n  t.async = 1;\n  t.src = \"https://www.clarity.ms/tag/\" + i;\n  y = l.getElementsByTagName(r)[0];\n  y.parentNode.insertBefore(t, y);\n\n  // Add error handling and logging for Clarity script loading\n  t.onerror = function () {\n    console.warn(\n      \"Clarity tracking unavailable - likely blocked by ad blocker or privacy extension:\",\n      {\n        url: t.src,\n        error: \"ERR_BLOCKED_BY_CLIENT\",\n        timestamp: new Date().toISOString(),\n        userAgent: navigator.userAgent,\n        referrer: document.referrer,\n        note: \"This is expected behavior with privacy tools and won't affect site functionality\",\n      }\n    );\n\n    // Set a global flag to indicate Clarity is blocked\n    window.clarityBlocked = true;\n  };\n\n  t.onload = function () {\n    console.log(\"Clarity tracking initialized successfully:\", {\n      url: t.src,\n      timestamp: new Date().toISOString(),\n    });\n\n    // Set a global flag to indicate Clarity is available\n    window.clarityBlocked = false;\n  };\n})(window, document, \"clarity\", \"script\", \"s7dys3l8mm\");\n\n/**\n * Enhanced Clarity Event Tracking System\n * Comprehensive conversion funnel and user journey tracking\n */\nclass ClarityEventTracker {\n  constructor() {\n    this.sessionId = this.generateSessionId();\n    this.userJourney = [];\n    this.conversionEvents = new Set();\n    this.isInitialized = false;\n\n    this.init();\n  }\n\n  /**\n   * Initialize Clarity event tracking\n   */\n  init() {\n    if (this.isInitialized) return;\n\n    // Wait for Clarity to load\n    this.waitForClarity().then(() => {\n      this.setupAutoTracking();\n      this.trackSessionStart();\n      this.isInitialized = true;\n      console.log(\"Enhanced Clarity tracking initialized\");\n    });\n  }\n\n  /**\n   * Wait for Clarity to be available\n   */\n  waitForClarity() {\n    return new Promise((resolve) => {\n      if (typeof window.clarity === \"function\") {\n        resolve();\n        return;\n      }\n\n      const checkClarity = setInterval(() => {\n        if (typeof window.clarity === \"function\") {\n          clearInterval(checkClarity);\n          resolve();\n        }\n      }, 100);\n\n      // Timeout after 10 seconds\n      setTimeout(() => {\n        clearInterval(checkClarity);\n        console.warn(\"Clarity not available within timeout\");\n        resolve();\n      }, 10000);\n    });\n  }\n\n  /**\n   * Generate unique session ID\n   */\n  generateSessionId() {\n    return Date.now().toString(36) + Math.random().toString(36).substr(2);\n  }\n\n  /**\n   * Track session start\n   */\n  trackSessionStart() {\n    this.trackEvent(\"session_start\", {\n      session_id: this.sessionId,\n      user_agent: navigator.userAgent,\n      referrer: document.referrer,\n      landing_page: window.location.href,\n      timestamp: new Date().toISOString(),\n    });\n  }\n\n  /**\n   * Enhanced event tracking with conversion funnel context\n   */\n  trackEvent(eventName, properties = {}) {\n    // Check if Clarity is blocked or unavailable\n    if (\n      typeof window.clarity !== \"function\" ||\n      window.clarityBlocked === true\n    ) {\n      console.log(\n        `Clarity tracking skipped for ${eventName} (Clarity unavailable)`\n      );\n      return;\n    }\n\n    // Add session context to all events\n    const enhancedProperties = {\n      ...properties,\n      session_id: this.sessionId,\n      page_url: window.location.href,\n      timestamp: new Date().toISOString(),\n    };\n\n    // Track in Clarity\n    window.clarity(\"event\", eventName, enhancedProperties);\n\n    // Track user journey for funnel analysis\n    this.userJourney.push({\n      event: eventName,\n      properties: enhancedProperties,\n      timestamp: Date.now(),\n    });\n\n    console.log(`Clarity Event: ${eventName}`, enhancedProperties);\n  }\n\n  /**\n   * Track conversion funnel milestones\n   */\n  trackConversionMilestone(milestone, details = {}) {\n    const eventName = `conversion_${milestone}`;\n    this.conversionEvents.add(milestone);\n\n    this.trackEvent(eventName, {\n      milestone,\n      funnel_step: this.getFunnelStep(milestone),\n      ...details,\n    });\n  }\n\n  /**\n   * Get funnel step number for milestone\n   */\n  getFunnelStep(milestone) {\n    const funnelSteps = {\n      // Awareness\n      homepage_visit: 1,\n      hero_interaction: 1,\n\n      // Interest\n      project_view: 2,\n      case_study_start: 2,\n      content_engagement: 2,\n\n      // Consideration\n      case_study_complete: 3,\n      contact_page_visit: 3,\n      resume_download: 3,\n\n      // Action\n      contact_form_start: 4,\n      contact_form_submit: 4,\n      external_link_click: 4,\n\n      // Retention\n      return_visit: 5,\n      newsletter_signup: 5,\n    };\n\n    return funnelSteps[milestone] || 0;\n  }\n\n  /**\n   * Track user intent signals\n   */\n  trackIntentSignal(signal, strength = \"medium\") {\n    this.trackEvent(\"user_intent\", {\n      signal,\n      strength, // low, medium, high\n      intent_type: this.categorizeIntent(signal),\n    });\n  }\n\n  /**\n   * Categorize intent signals\n   */\n  categorizeIntent(signal) {\n    const intentCategories = {\n      // High intent signals\n      resume_download: \"job_inquiry\",\n      contact_form_submit: \"direct_contact\",\n      linkedin_click: \"professional_networking\",\n      portfolio_view: \"career_interest\",\n\n      // Medium intent signals\n      case_study_complete: \"project_interest\",\n      long_session: \"content_engagement\",\n      multiple_project_views: \"comprehensive_research\",\n\n      // Low intent signals\n      homepage_visit: \"initial_awareness\",\n      social_share: \"content_appreciation\",\n      scroll_depth: \"content_engagement\",\n    };\n\n    return intentCategories[signal] || \"general_engagement\";\n  }\n\n  /**\n   * Track content engagement\n   */\n  trackContentEngagement(contentType, contentId, action, details = {}) {\n    this.trackEvent(\"content_engagement\", {\n      content_type: contentType,\n      content_id: contentId,\n      action, // view, read, share, save, etc.\n      engagement_duration: details.duration || 0,\n      scroll_depth: details.scrollDepth || 0,\n      ...details,\n    });\n  }\n\n  /**\n   * Track micro-conversions\n   */\n  trackMicroConversion(conversionType, value = 1) {\n    this.trackEvent(\"micro_conversion\", {\n      conversion_type: conversionType,\n      value,\n      conversion_category: this.getConversionCategory(conversionType),\n    });\n  }\n\n  /**\n   * Get conversion category\n   */\n  getConversionCategory(conversionType) {\n    const categories = {\n      // Content engagement\n      case_study_view: \"content\",\n      project_click: \"content\",\n      scroll_depth_75: \"content\",\n\n      // Lead generation\n      contact_page_visit: \"lead\",\n      email_click: \"lead\",\n      linkedin_click: \"lead\",\n\n      // Business impact\n      resume_download: \"business\",\n      contact_form_submit: \"business\",\n      return_visit: \"business\",\n    };\n\n    return categories[conversionType] || \"engagement\";\n  }\n\n  /**\n   * Setup automatic tracking for common interactions\n   */\n  setupAutoTracking() {\n    this.trackScrollDepth();\n    this.trackTimeOnPage();\n    this.trackOutboundLinks();\n    this.trackProjectInteractions();\n    this.trackContactInteractions();\n    this.trackContentMilestones();\n  }\n\n  /**\n   * Track scroll depth milestones\n   */\n  trackScrollDepth() {\n    let maxScrollDepth = 0;\n    const milestones = [25, 50, 75, 90, 100];\n\n    window.addEventListener(\"scroll\", () => {\n      const scrollPercent = Math.round(\n        (window.scrollY /\n          (document.documentElement.scrollHeight - window.innerHeight)) *\n          100\n      );\n\n      if (scrollPercent > maxScrollDepth) {\n        maxScrollDepth = scrollPercent;\n\n        milestones.forEach((milestone) => {\n          if (\n            scrollPercent >= milestone &&\n            !this.conversionEvents.has(`scroll_${milestone}`)\n          ) {\n            this.conversionEvents.add(`scroll_${milestone}`);\n            this.trackMicroConversion(`scroll_depth_${milestone}`, milestone);\n          }\n        });\n      }\n    });\n  }\n\n  /**\n   * Track time on page milestones\n   */\n  trackTimeOnPage() {\n    const startTime = Date.now();\n    const milestones = [30, 60, 120, 300]; // seconds\n\n    milestones.forEach((seconds) => {\n      setTimeout(() => {\n        if (!this.conversionEvents.has(`time_${seconds}s`)) {\n          this.conversionEvents.add(`time_${seconds}s`);\n          this.trackEvent(\"time_on_page\", {\n            duration_seconds: seconds,\n            duration_minutes: Math.round((seconds / 60) * 10) / 10,\n            milestone: `${seconds}s`,\n          });\n        }\n      }, seconds * 1000);\n    });\n  }\n\n  /**\n   * Track outbound link clicks\n   */\n  trackOutboundLinks() {\n    document.addEventListener(\"click\", (e) => {\n      const link = e.target.closest(\"a\");\n      if (link && link.href) {\n        const url = new URL(link.href, window.location.origin);\n\n        // Check if it's an external link\n        if (url.origin !== window.location.origin) {\n          this.trackEvent(\"outbound_link_click\", {\n            destination_url: link.href,\n            link_text: link.textContent?.trim() || \"\",\n            link_type: this.getLinkType(link.href),\n          });\n        }\n      }\n    });\n  }\n\n  /**\n   * Get link type for categorization\n   */\n  getLinkType(url) {\n    if (url.includes(\"linkedin.com\")) return \"professional\";\n    if (url.includes(\"github.com\")) return \"technical\";\n    if (url.includes(\"mailto:\")) return \"contact\";\n    if (url.includes(\"twitter.com\") || url.includes(\"x.com\")) return \"social\";\n    return \"external\";\n  }\n\n  /**\n   * Track project card interactions\n   */\n  trackProjectInteractions() {\n    document.addEventListener(\"click\", (e) => {\n      const projectCard = e.target.closest(\".card-link, .project-snippet\");\n      if (projectCard) {\n        const link = projectCard.querySelector(\"a\");\n        const projectName =\n          projectCard.querySelector(\"h3, h2\")?.textContent?.trim() ||\n          \"Unknown Project\";\n\n        if (link) {\n          this.trackConversionMilestone(\"project_view\", {\n            project_name: projectName,\n            project_url: link.href,\n            project_type: this.getProjectType(link.href),\n          });\n        }\n      }\n    });\n  }\n\n  /**\n   * Get project type from URL\n   */\n  getProjectType(url) {\n    if (url.includes(\"autodesk\")) return \"enterprise\";\n    if (url.includes(\"intel\")) return \"technology\";\n    if (url.includes(\"daimler\")) return \"automotive\";\n    return \"portfolio\";\n  }\n\n  /**\n   * Track contact page interactions\n   */\n  trackContactInteractions() {\n    // Track contact page visits\n    if (window.location.pathname.includes(\"contact\")) {\n      this.trackConversionMilestone(\"contact_page_visit\");\n    }\n\n    // Track contact link clicks\n    document.addEventListener(\"click\", (e) => {\n      const contactLink = e.target.closest(\n        \"a[href*='mailto:'], a[href*='linkedin'], a[href*='github']\"\n      );\n      if (contactLink) {\n        const href = contactLink.getAttribute(\"href\");\n        const linkType = this.getLinkType(href);\n\n        this.trackEvent(\"contact_interaction\", {\n          contact_type: linkType,\n          contact_url: href,\n          link_text: contactLink.textContent?.trim() || \"\",\n        });\n      }\n    });\n  }\n\n  /**\n   * Track content milestones for case studies\n   */\n  trackContentMilestones() {\n    // Track case study section views\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            const section = entry.target;\n            const sectionId = section.id;\n            const sectionName =\n              section.querySelector(\"h2, h3\")?.textContent?.trim() || sectionId;\n\n            if (\n              sectionId &&\n              !this.conversionEvents.has(`section_${sectionId}`)\n            ) {\n              this.conversionEvents.add(`section_${sectionId}`);\n              this.trackContentEngagement(\n                \"case_study_section\",\n                sectionId,\n                \"view\",\n                {\n                  section_name: sectionName,\n                }\n              );\n            }\n          }\n        });\n      },\n      { threshold: 0.5 }\n    );\n\n    // Observe all sections\n    document.querySelectorAll(\"section[id]\").forEach((section) => {\n      observer.observe(section);\n    });\n  }\n\n  /**\n   * Get user journey summary\n   */\n  getUserJourneySummary() {\n    return {\n      session_id: this.sessionId,\n      total_events: this.userJourney.length,\n      conversion_events: Array.from(this.conversionEvents),\n      journey_duration:\n        this.userJourney.length > 0\n          ? this.userJourney[this.userJourney.length - 1].timestamp -\n            this.userJourney[0].timestamp\n          : 0,\n      funnel_progress: Math.max(\n        ...Array.from(this.conversionEvents).map(\n          (event) =>\n            this.getFunnelStep(event.split(\"_\").slice(1).join(\"_\")) || 0\n        )\n      ),\n      events: this.userJourney.slice(-20), // Last 20 events\n    };\n  }\n\n  /**\n   * Export journey data for analysis\n   */\n  exportJourneyData() {\n    return {\n      summary: this.getUserJourneySummary(),\n      full_journey: this.userJourney,\n      conversion_funnel: this.analyzeConversionFunnel(),\n    };\n  }\n\n  /**\n   * Analyze conversion funnel performance\n   */\n  analyzeConversionFunnel() {\n    const funnel = {\n      awareness:\n        this.conversionEvents.has(\"homepage_visit\") ||\n        this.conversionEvents.has(\"hero_interaction\"),\n      interest: Array.from(this.conversionEvents).some(\n        (event) =>\n          event.includes(\"project_view\") ||\n          event.includes(\"case_study\") ||\n          event.includes(\"content_engagement\")\n      ),\n      consideration: Array.from(this.conversionEvents).some(\n        (event) =>\n          event.includes(\"contact_page\") ||\n          event.includes(\"resume_download\") ||\n          event.includes(\"case_study_complete\")\n      ),\n      action: Array.from(this.conversionEvents).some(\n        (event) =>\n          event.includes(\"contact_form_submit\") ||\n          event.includes(\"external_link_click\")\n      ),\n      retention:\n        this.conversionEvents.has(\"return_visit\") ||\n        this.conversionEvents.has(\"newsletter_signup\"),\n    };\n\n    return {\n      funnel,\n      completion_rate:\n        Object.values(funnel).filter(Boolean).length /\n        Object.keys(funnel).length,\n      bottleneck: this.identifyBottleneck(funnel),\n    };\n  }\n\n  /**\n   * Identify funnel bottleneck\n   */\n  identifyBottleneck(funnel) {\n    const stages = Object.entries(funnel);\n    for (let i = 0; i < stages.length - 1; i++) {\n      if (stages[i][1] && !stages[i + 1][1]) {\n        return stages[i + 1][0];\n      }\n    }\n    return null;\n  }\n}\n\n// Create and export singleton instance\nconst clarityTracker = new ClarityEventTracker();\n\n// Export for use in other scripts\nif (typeof window !== \"undefined\") {\n  window.clarityTracking = {\n    trackEvent: (eventName, properties) =>\n      clarityTracker.trackEvent(eventName, properties),\n    trackConversionMilestone: (milestone, details) =>\n      clarityTracker.trackConversionMilestone(milestone, details),\n    trackIntentSignal: (signal, strength) =>\n      clarityTracker.trackIntentSignal(signal, strength),\n    trackContentEngagement: (type, id, action, details) =>\n      clarityTracker.trackContentEngagement(type, id, action, details),\n    trackMicroConversion: (type, value) =>\n      clarityTracker.trackMicroConversion(type, value),\n    getUserJourneySummary: () => clarityTracker.getUserJourneySummary(),\n    exportJourneyData: () => clarityTracker.exportJourneyData(),\n  };\n}\n\nexport default clarityTracker;\n","function _define_property(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });\n    } else obj[key] = value;\n\n    return obj;\n}\nexport { _define_property as _ };\n","import { _ as _define_property } from \"./_define_property.js\";\n\nfunction _object_spread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i] != null ? arguments[i] : {};\n        var ownKeys = Object.keys(source);\n\n        if (typeof Object.getOwnPropertySymbols === \"function\") {\n            ownKeys = ownKeys.concat(\n                Object.getOwnPropertySymbols(source).filter(function(sym) {\n                    return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n                })\n            );\n        }\n\n        ownKeys.forEach(function(key) {\n            _define_property(target, key, source[key]);\n        });\n    }\n\n    return target;\n}\nexport { _object_spread as _ };\n","function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n        var symbols = Object.getOwnPropertySymbols(object);\n        if (enumerableOnly) {\n            symbols = symbols.filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n            });\n        }\n        keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n}\nfunction _object_spread_props(target, source) {\n    source = source != null ? source : {};\n\n    if (Object.getOwnPropertyDescriptors) Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    else {\n        ownKeys(Object(source)).forEach(function(key) {\n            Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n    }\n\n    return target;\n}\nexport { _object_spread_props as _ };\n","/**\n * Simple Analytics - Lightweight, privacy-first analytics solution\n * Replaces complex 8-module system with single-file implementation\n * Target size: <5KB, vanilla JavaScript, cross-browser compatible\n */\n\nclass SimpleAnalytics {\n  constructor(options = {}) {\n    this.measurementId = options.measurementId || \"G-Z5DNDF44NG\";\n    this.isInitialized = false;\n    this.consentGiven = this._checkConsent();\n    this.isDevelopment = this._isDevelopment();\n    this.queue = [];\n    this.fallbackMode = false;\n\n    // Bind methods to preserve context\n    this._handleError = this._handleError.bind(this);\n    this._sendToGA4 = this._sendToGA4.bind(this);\n  }\n\n  /**\n   * Initialize analytics\n   */\n  async init() {\n    if (this.isInitialized) return true;\n\n    try {\n      // Wait for gtag to be available or create fallback\n      await this._waitForGtag();\n\n      if (!this.fallbackMode) {\n        this._configureGA4();\n      }\n\n      this.isInitialized = true;\n\n      // Process queued events\n      this._processQueue();\n\n      // Enable auto-tracking\n      this._enableAutoTracking();\n\n      return true;\n    } catch (error) {\n      this._handleError(\"initialization\", error);\n      this.fallbackMode = true;\n      this.isInitialized = true; // Allow fallback mode\n      return false;\n    }\n  }\n\n  /**\n   * Wait for Google Analytics gtag to load\n   */\n  _waitForGtag() {\n    return new Promise((resolve, reject) => {\n      if (this.fallbackMode) {\n        resolve();\n        return;\n      }\n\n      // Check if gtag already exists\n      if (window.gtag) {\n        resolve();\n        return;\n      }\n\n      // Wait for script to load\n      let attempts = 0;\n      const maxAttempts = 20;\n\n      const checkGtag = setInterval(() => {\n        attempts++;\n\n        if (window.gtag) {\n          clearInterval(checkGtag);\n          resolve();\n        } else if (attempts >= maxAttempts) {\n          clearInterval(checkGtag);\n          this.fallbackMode = true;\n          resolve(); // Resolve in fallback mode\n        }\n      }, 100);\n    });\n  }\n\n  /**\n   * Configure Google Analytics 4\n   */\n  _configureGA4() {\n    if (this.fallbackMode) return;\n\n    // Initialize dataLayer if needed\n    window.dataLayer = window.dataLayer || [];\n\n    // Configure GA4\n    window.gtag(\"js\", new Date());\n    window.gtag(\"config\", this.measurementId, {\n      page_title: document.title,\n      page_location: window.location.href,\n      allow_ad_personalization_signals: false,\n      allow_google_signals: false, // Privacy-first\n      send_page_view: true,\n    });\n  }\n\n  /**\n   * Check if user has given consent\n   */\n  _checkConsent() {\n    try {\n      const consent = localStorage.getItem(\"analytics-consent\");\n      return consent === \"granted\";\n    } catch (e) {\n      return false; // Default to no consent if localStorage fails\n    }\n  }\n\n  /**\n   * Set user consent\n   */\n  setConsent(granted) {\n    try {\n      localStorage.setItem(\"analytics-consent\", granted ? \"granted\" : \"denied\");\n      this.consentGiven = granted;\n\n      if (granted && this.isInitialized) {\n        this._processQueue();\n      }\n    } catch (e) {\n      // Silently fail if localStorage is not available\n    }\n  }\n\n  /**\n   * Check if in development environment\n   */\n  _isDevelopment() {\n    return (\n      window.location.hostname === \"localhost\" ||\n      window.location.hostname === \"127.0.0.1\" ||\n      window.location.port !== \"\"\n    );\n  }\n\n  /**\n   * Enable automatic tracking\n   */\n  _enableAutoTracking() {\n    // Track page visibility changes\n    document.addEventListener(\"visibilitychange\", () => {\n      if (document.hidden) {\n        this.trackTimeOnPage();\n      }\n    });\n\n    // Track scroll depth\n    let maxScrollDepth = 0;\n    window.addEventListener(\"scroll\", () => {\n      const scrollDepth = Math.round(\n        (window.scrollY /\n          (document.documentElement.scrollHeight - window.innerHeight)) *\n          100\n      );\n      if (scrollDepth > maxScrollDepth) {\n        maxScrollDepth = scrollDepth;\n        if (scrollDepth % 25 === 0) {\n          // Track at 25%, 50%, 75%, 100%\n          this.trackScrollDepth(scrollDepth);\n        }\n      }\n    });\n  }\n\n  /**\n   * Send event to Google Analytics 4\n   */\n  _sendToGA4(eventName, parameters = {}) {\n    if (!this.consentGiven || this.fallbackMode) {\n      // Queue for later if no consent, or log in fallback mode\n      if (!this.consentGiven) {\n        this.queue.push({ eventName, parameters });\n      } else if (this.fallbackMode) {\n        console.log(\"Analytics (fallback):\", eventName, parameters);\n      }\n      return;\n    }\n\n    try {\n      window.gtag(\"event\", eventName, parameters);\n    } catch (error) {\n      this._handleError(\"sendToGA4\", error);\n    }\n  }\n\n  /**\n   * Process queued events\n   */\n  _processQueue() {\n    if (!this.consentGiven) return;\n\n    this.queue.forEach(({ eventName, parameters }) => {\n      this._sendToGA4(eventName, parameters);\n    });\n    this.queue = [];\n  }\n\n  /**\n   * Handle errors gracefully\n   */\n  _handleError(context, error) {\n    console.warn(`Analytics error in ${context}:`, error);\n    // Could send to error reporting service here if needed\n  }\n\n  // ===== PUBLIC API METHODS =====\n\n  /**\n   * Track project clicks/views\n   */\n  trackProjectClick(projectName, projectType = \"unknown\") {\n    this._sendToGA4(\"project_interaction\", {\n      project_name: projectName,\n      project_type: projectType,\n      interaction_type: \"click\",\n    });\n  }\n\n  /**\n   * Track resume downloads\n   */\n  trackResumeDownload() {\n    this._sendToGA4(\"file_download\", {\n      file_name: \"resume\",\n      file_type: \"pdf\",\n    });\n  }\n\n  /**\n   * Track contact form interactions\n   */\n  trackContactForm(action, method = \"unknown\") {\n    this._sendToGA4(\"contact_form\", {\n      action: action,\n      method: method,\n    });\n  }\n\n  /**\n   * Track external link clicks\n   */\n  trackExternalLink(url, linkText = \"\") {\n    this._sendToGA4(\"external_link\", {\n      link_url: url,\n      link_text: linkText,\n    });\n  }\n\n  /**\n   * Track scroll depth\n   */\n  trackScrollDepth(depth = null) {\n    const scrollDepth =\n      depth ||\n      Math.round(\n        (window.scrollY /\n          (document.documentElement.scrollHeight - window.innerHeight)) *\n          100\n      );\n\n    this._sendToGA4(\"scroll_depth\", {\n      scroll_depth: scrollDepth,\n    });\n  }\n\n  /**\n   * Track time on page\n   */\n  trackTimeOnPage() {\n    if (!this.pageStartTime) {\n      this.pageStartTime = Date.now();\n      return;\n    }\n\n    const timeSpent = Math.round((Date.now() - this.pageStartTime) / 1000);\n    this._sendToGA4(\"time_on_page\", {\n      time_spent_seconds: timeSpent,\n      page_path: window.location.pathname,\n    });\n  }\n\n  /**\n   * Track case study interactions\n   */\n  trackCaseStudyInteraction(caseStudyName, action, section = \"\") {\n    this._sendToGA4(\"case_study_interaction\", {\n      case_study_name: caseStudyName,\n      action: action,\n      section: section,\n    });\n  }\n\n  /**\n   * Track image lightbox usage\n   */\n  trackImageLightbox(imageName, caseStudy = \"\") {\n    this._sendToGA4(\"lightbox_view\", {\n      image_name: imageName,\n      case_study: caseStudy,\n    });\n  }\n\n  /**\n   * Track case study completion\n   */\n  trackCaseStudyCompletion(caseStudyName) {\n    this._sendToGA4(\"case_study_completion\", {\n      case_study_name: caseStudyName,\n    });\n  }\n\n  /**\n   * Get analytics status\n   */\n  getStatus() {\n    return {\n      initialized: this.isInitialized,\n      consentGiven: this.consentGiven,\n      fallbackMode: this.fallbackMode,\n      isDevelopment: this.isDevelopment,\n      queueLength: this.queue.length,\n    };\n  }\n}\n\n// Create singleton instance\nconst analytics = new SimpleAnalytics();\n\n// Auto-initialize\nanalytics.init();\n\n// Export for ES modules\nexport default analytics;\n\n// Global access for backward compatibility\nwindow.portfolioAnalytics = {\n  trackProjectClick: (...args) => analytics.trackProjectClick(...args),\n  trackResumeDownload: () => analytics.trackResumeDownload(),\n  trackContactForm: (...args) => analytics.trackContactForm(...args),\n  trackExternalLink: (...args) => analytics.trackExternalLink(...args),\n  trackScrollDepth: () => analytics.trackScrollDepth(),\n  trackTimeOnPage: () => analytics.trackTimeOnPage(),\n  trackCaseStudyInteraction: (...args) =>\n    analytics.trackCaseStudyInteraction(...args),\n  trackImageLightbox: (...args) => analytics.trackImageLightbox(...args),\n  trackCaseStudyCompletion: (...args) =>\n    analytics.trackCaseStudyCompletion(...args),\n  setConsent: (granted) => analytics.setConsent(granted),\n  getStatus: () => analytics.getStatus(),\n};\n","/**\n * Smart Image Path Utility\n * Automatically uses optimized images when available\n */\n\nclass SmartImageLoader {\n  constructor() {\n    this.optimizedBasePath = \"./img/\";\n    this.webpBasePath = \"./img/webp/\";\n    this.fallbackBasePath = \"./img/\";\n  }\n\n  /**\n   * Get the best available image path\n   * @param {string} imagePath - Original image path\n   * @param {boolean} preferWebP - Whether to prefer WebP format\n   * @returns {Promise<string>} - Best available image path\n   */\n  async getBestImagePath(imagePath, preferWebP = true) {\n    // Remove leading ./ if present\n    const cleanPath = imagePath.replace(/^\\.\\/img\\//, \"\");\n\n    // Try WebP first if supported and preferred\n    if (preferWebP && this.supportsWebP()) {\n      const webpPath =\n        this.webpBasePath + cleanPath.replace(/\\.(jpg|jpeg|png)$/i, \".webp\");\n      if (await this.imageExists(webpPath)) {\n        return webpPath;\n      }\n    }\n\n    // Try optimized version\n    const optimizedPath = this.optimizedBasePath + cleanPath;\n    if (await this.imageExists(optimizedPath)) {\n      return optimizedPath;\n    }\n\n    // Fall back to original\n    return this.fallbackBasePath + cleanPath;\n  }\n\n  /**\n   * Check if an image exists\n   * @param {string} imagePath\n   * @returns {Promise<boolean>}\n   */\n  async imageExists(imagePath) {\n    return new Promise((resolve) => {\n      const img = new Image();\n      img.onload = () => resolve(true);\n      img.onerror = () => resolve(false);\n      img.src = imagePath;\n    });\n  }\n\n  /**\n   * Check WebP support\n   * @returns {boolean}\n   */\n  supportsWebP() {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = 1;\n    return canvas.toDataURL(\"image/webp\").indexOf(\"data:image/webp\") === 0;\n  }\n\n  /**\n   * Update all images on the page to use optimized versions\n   */\n  async optimizePageImages() {\n    const images = document.querySelectorAll(\"img[src*=\\\"./img/\\\"]\");\n    const promises = Array.from(images).map(async (img) => {\n      const imageElement = /** @type {HTMLImageElement} */ (img);\n      const originalSrc = imageElement.src;\n      const relativePath = originalSrc.replace(window.location.origin, \"\");\n      const optimizedPath = await this.getBestImagePath(relativePath);\n\n      if (optimizedPath !== relativePath) {\n        imageElement.src = optimizedPath;\n        // Image optimized silently for production performance\n      }\n    });\n\n    await Promise.all(promises);\n  }\n}\n\n// Auto-initialize and optimize images\nif (typeof window !== \"undefined\") {\n  const smartLoader = new SmartImageLoader();\n\n  // Wait for DOM to be ready\n  if (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", () => {\n      smartLoader.optimizePageImages();\n    });\n  } else {\n    smartLoader.optimizePageImages();\n  }\n\n  // Make available globally\n  /** @type {any} */ (window).smartImageLoader = smartLoader;\n}\n\nexport default SmartImageLoader;\n","/**\n * Custom element for the site-wide header, including navigation.\n * It encapsulates its own structure, styles, and basic behavior.\n * @extends HTMLElement\n */\n// Issue #8: Enhance SiteHeader Component - Props, Events, and Accessibility\n// See: https://github.com/Jaswetz/jaswetz.github.io/issues/8\n\nclass SiteHeader extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: \"open\" });\n    this.isMenuOpen = false;\n    this.lastScrollY = 0;\n    this.updateActiveSection = null; // Store reference for cleanup\n  }\n\n  /**\n   * Called when the element is added to the document's DOM.\n   * Renders the header structure and styles into the Shadow DOM.\n   */\n  connectedCallback() {\n    // Check if we're on the home page to determine navigation behavior\n    const currentPath = window.location.pathname;\n\n    const isHomePage =\n      currentPath === \"/\" ||\n      currentPath === \"/index.html\" ||\n      currentPath.endsWith(\"/index.html\") ||\n      currentPath === \"\" ||\n      currentPath.includes(\"index.html\");\n\n    this.shadowRoot.innerHTML = /*html*/ `  \n    <style>\n      :host {\n      display: block;\n      position: fixed;\n      top: var(--space-s);\n      left: 50%; \n      transform: translateX(-50%);\n      width: var(--section-width);\n      z-index: 1000;\n      /* MODIFIED transition property */\n      transition: top 0.5s cubic-bezier(0.4, 0, 0.2, 1), \n            width 0.5s cubic-bezier(0.4, 0, 0.2, 1), \n            max-width 0.5s cubic-bezier(0.4, 0, 0.2, 1), \n            box-shadow 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n      will-change: top, width, max-width, box-shadow; /* ADDED */\n      max-width: var(--max-width);\n      outline: none; /* Prevent any outline on the host element */\n      }\n\n      :host:focus {\n      outline: none; /* Explicitly prevent focus outline on host */\n      }\n\n      :host(.scrolled) {\n      top: 0;\n      left: 0;\n      transform: none;\n      width: 100%;\n      border-radius: 0;\n      max-width: none;\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n\n      }\n\n      .header-content {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      border: var(--border-width) solid var(--color-border);\n      padding: var(--space-s) var(--space-m);\n      border-radius: var(--border-radius);\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n      /* MODIFIED transition property */\n      transition: padding 0.5s cubic-bezier(0.4, 0, 0.2, 1), \n            border-radius 0.5s cubic-bezier(0.4, 0, 0.2, 1), \n            background-color 0.5s cubic-bezier(0.4, 0, 0.2, 1),\n            box-shadow 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n      will-change: padding, border-radius, background-color, box-shadow; /* ADDED */\n      outline: none; /* Prevent outline on header content */\n      backdrop-filter: blur(5px);\n        -webkit-backdrop-filter: blur(5px);\n        background-color: rgba(255, 255, 255, 0.3);\n      }\n\n      .header-content:focus {\n      outline: none; /* Explicitly prevent focus outline on header content */\n      }\n\n      :host(.scrolled) .header-content {\n      border-radius: 0;\n      padding: var(--space-xs) var(--space-m);\n      box-shadow: none; /* ADDED to remove inner shadow when host has shadow */\n      background-color: rgba(255, 255, 255, 0.2);\n        backdrop-filter: blur(5px);\n        -webkit-backdrop-filter: blur(5px);\n        border-right: none;\n        border-left: none;\n        border-top: none;\n      }\n\n      .logo a {\n      font-weight: var(--font-weight-medium);\n      font-family: var(--font-family-heading);\n      text-decoration: none;\n      color: var(--color-text);\n      font-size: var(--text-size-heading-4);\n      z-index: 2;\n      transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);\n      display: flex;\n      align-items: center;\n      gap: var(--space-2xs, 0.5em);\n      padding: var(--space-2xs) var(--space-xs);\n      border-radius: var(--border-radius);\n      position: relative;\n      overflow: hidden;\n      }\n\n\n\n      .logo-text {\n      margin-left: var(--space-2xs, 0.25em);\n      display: inline-block;\n      }\n\n\n\n      :host(.scrolled) .logo a {\n      font-size: var(--font-size-lg);\n      }\n\n      .menu-toggle {\n      display: none;\n      background: none;\n      border: none;\n      padding: var(--space-2xs);\n      cursor: pointer;\n      z-index: 1001;\n      position: relative;\n      color: var(--color-text);\n      border-radius: var(--border-radius);\n      transition: var(--transition-interactive);\n      overflow: hidden;\n      }\n\n      .menu-toggle::before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: var(--overlay-gradient-primary);\n      opacity: 0;\n      transition: var(--transition-quick);\n      pointer-events: none;\n      z-index: -1;\n      }\n\n      .menu-toggle:hover {\n      transform: var(--hover-transform) scale(var(--hover-scale));\n      box-shadow: var(--hover-shadow);\n      }\n\n      .menu-toggle:focus {\n      outline: var(--focus-outline);\n      outline-offset: var(--focus-outline-offset);\n      transform: var(--hover-transform) scale(var(--hover-scale));\n      box-shadow: var(--focus-shadow-enhanced);\n      }\n\n      .menu-toggle:active {\n      transform: translateY(0) scale(0.98);\n      box-shadow: var(--active-shadow);\n      }\n\n      .menu-toggle:hover::before {\n      opacity: 1;\n      }\n\n      .menu-toggle:focus::before {\n      opacity: 1;\n      }\n\n      .menu-toggle:active::before {\n      opacity: 1;\n      background: var(--overlay-gradient-enhanced);\n      }\n\n      .plus-icon {\n      display: block;\n      width: 24px;\n      height: 24px;\n      position: relative;\n      }\n      .plus-icon span {\n      position: absolute;\n      background: var(--color-text);\n      border-radius: 1px;\n      transition: transform .5s cubic-bezier(0.4, 0, 0.2, 1);\n      }\n      .plus-icon .vertical {\n      left: 50%;\n      top: 4px;\n      width: 2px;\n      height: 16px;\n      transform: translateX(-50%);\n      }\n      .plus-icon .horizontal {\n      top: 50%;\n      left: 4px;\n      width: 16px;\n      height: 2px;\n      transform: translateY(-50%);\n      }\n      .menu-toggle.active .plus-icon .vertical {\n      transform: translateX(-50%) rotate(90deg);\n      }\n      .menu-toggle.active .plus-icon .horizontal {\n      transform: translateY(-50%) rotate(90deg);\n      }\n\n      nav {\n      display: flex;\n      align-items: center;\n      }\n\n      nav ul {\n      list-style: none;\n      padding: 0;\n      margin: 0;\n      display: flex;\n      align-items: center;\n      gap: var(--space-m);\n      }\n\n      nav li a {\n      text-decoration: none;\n      color: var(--color-text);\n      padding: var(--space-2xs) var(--space-xs);\n      font-size: var(--text-size-heading-5);\n      border-radius: var(--border-radius);\n      transition: var(--transition-interactive);\n      font-family: var(--font-family-heading);\n      font-weight: var(--font-weight-medium);\n      position: relative;\n      overflow: hidden;\n      }\n\n      nav li a.active {\n      color: var(--color-primary-alt);\n      background-color: rgba(37, 105, 237, 0.1);\n      }\n\n      nav li a:hover,\n      nav li a:focus,\n      .logo a:hover,\n      .logo a:focus  {\n      color: var(--color-primary-alt);\n      transform: var(--hover-transform) scale(var(--hover-scale));\n      box-shadow: var(--hover-shadow);\n      text-decoration: none;\n      }\n\n      nav li a:active {\n      color: var(--color-primary-alt);\n      transform: translateY(0) scale(0.98);\n      box-shadow: var(--active-shadow);\n      text-decoration: none;\n      }\n\n      nav li a:hover::before,\n      nav li a:focus::before {\n      opacity: 1;\n      }\n\n      nav li a:active::before {\n      opacity: 1;\n      background: var(--overlay-gradient-enhanced);\n      }\n\n      .logo a:active {\n      color: var(--color-primary-alt);\n      transform: translateY(0) scale(0.98);\n      box-shadow: var(--active-shadow);\n      text-decoration: none;\n      }\n\n      .logo a:hover::before,\n      .logo a:focus::before {\n      opacity: 1;\n      }\n\n      .logo a:active::before {\n      opacity: 1;\n      background: linear-gradient(135deg, rgba(37, 105, 237, 0.1), rgba(23, 70, 160, 0.15));\n      }\n\n      .logo a:hover .logo-svg,\n      .logo a:focus .logo-svg {\n      transform: scale(var(--hover-scale-large));\n      }\n\n      .logo a:active .logo-svg {\n      transform: scale(var(--hover-scale));\n      }\n      .logo-svg {\n      height: var(--space-m-l);\n      width: auto;\n      min-width: 1em;\n      min-height: 1em;\n      display: inline-block;\n      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n      }\n\n      /* External link icon */\n      .external-icon {\n      width: 16px;\n      height: 16px;\n      margin-left: var(--space-2xs);\n      vertical-align: middle;\n      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n      }\n\n      a:hover .external-icon,\n      a:focus .external-icon {\n      transform: scale(1.1);\n      }\n\n      /* Added button styles */\n      .button {\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      line-height: 1;\n      text-decoration: none;\n      text-align: center;\n      border: 2px solid var(--color-primary);\n      border-radius: var(--border-radius);\n      background-color: var(--color-primary);\n      color: white;\n      cursor: pointer;\n      transition: var(--transition-interactive);\n      position: relative;\n      overflow: hidden;\n      gap: var(--space-xs);\n      }\n\n      .button::before {\n      content: \"\";\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: var(--overlay-gradient-light);\n      opacity: 0;\n      transition: var(--transition-quick);\n      pointer-events: none;\n      z-index: 1;\n      }\n\n      /* Hover state */\n      .button:hover {\n      background-color: var(--color-primary-alt);\n      border-color: var(--color-primary-alt);\n      color: white;\n      transform: var(--hover-transform);\n      box-shadow: var(--hover-shadow);\n      text-decoration: none;\n      }\n\n      .button:hover::before {\n      opacity: 1;\n      }\n\n      /* Focus state */\n      .button:focus {\n      outline: var(--focus-outline);\n      outline-offset: var(--focus-outline-offset);\n      background-color: var(--color-primary-alt);\n      border-color: var(--color-primary-alt);\n      color: white;\n      transform: var(--hover-transform);\n      box-shadow: var(--focus-shadow-enhanced);\n      text-decoration: none;\n      }\n\n      .button:focus::before {\n      opacity: 1;\n      }\n\n      /* Active/pressed state */\n      .button:active {\n      background-color: var(--color-primary-alt);\n      border-color: var(--color-primary-alt);\n      color: white;\n      transform: var(--active-transform);\n      box-shadow: var(--active-shadow);\n      text-decoration: none;\n      }\n\n      .button:active::before {\n      opacity: 1;\n      background: var(--overlay-gradient-enhanced);\n      }\n\n      /* Secondary button styles */\n      .button--secondary {\n      background-color: transparent;\n      color: var(--color-primary);\n      border-color: var(--color-primary);\n      }\n\n      .button--secondary::before {\n      background: var(--overlay-gradient-primary);\n      }\n\n      .button--secondary:hover {\n      background-color: var(--color-primary);\n      border-color: var(--color-primary);\n      color: white;\n      transform: var(--hover-transform);\n      }\n      /* End of added button styles */\n\n\n      @media (max-width: 47.9375rem) {\n    \n\n      .menu-toggle {\n      display: flex;\n      align-items: center;\n      }\n\n      nav {\n      position: absolute;\n      right: 0;\n      border-radius: var(--border-radius);\n      top: calc(100% + var(--space-2xs));\n      max-width: 300px;\n      width: var(--space-4xl);\n      background-color: var(--color-surface);\n      padding: var(--space-xs);\n      opacity: 0;\n      visibility: hidden;\n      transition: opacity .3s ease, transform .3s ease, visibility .3s ease;\n      z-index: 1000;\n      display: block;\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n      width: calc(var(--space-2xl-3xl) * 3.0);\n      }\n\n      nav.active {\n      opacity: 1;\n      visibility: visible;\n      }\n\n      nav ul {\n      flex-direction: column;\n      gap: var(--space-2xs);\n      align-items: stretch;\n      }\n\n      nav li a {\n      font-size: var(--font-size-base);\n      padding: var(--space-2xs) var(--space-xs);\n      display: block;\n      text-align: center;\n      }\n\n      nav li a.button {\n      width: 87%;\n      justify-content: center;\n      }\n      }\n    </style>\n    <div class=\"header-content\" role=\"banner\">\n      <div class=\"logo\">\n      <a href=\"/index.html\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" class=\"logo-svg\" viewBox=\"0 0 39 39\">\n        <defs>\n        <clipPath id=\"clipPath2973389018\">\n        <path d=\"M0 0L39 0L39 39L0 39L0 0Z\" fill-rule=\"nonzero\" transform=\"matrix(1 0 0 1 0 0)\"/>\n        </clipPath>\n        </defs>\n        <g clip-path=\"url(#clipPath2973389018)\">\n        <path d=\"M9 0L18 17L0 17L9 0Z\" fill-rule=\"nonzero\" transform=\"matrix(1 0 0 1 10.5 10)\" fill=\"#2569ed\"/>\n        <path d=\"M16 -0.5Q19.3566 -0.5 22.4227 0.796857Q25.3838 2.04931 27.6673 4.33274Q29.9507 6.61615 31.2031 9.5773Q32.5 12.6434 32.5 16Q32.5 19.3566 31.2031 22.4227Q29.9507 25.3838 27.6673 27.6673Q25.3839 29.9507 22.4227 31.2031Q19.3566 32.5 16 32.5Q12.6434 32.5 9.5773 31.2031Q6.61615 29.9507 4.33274 27.6673Q2.04931 25.3838 0.796855 22.4227Q-0.500002 19.3566 -0.500002 16Q-0.5 12.6434 0.796857 9.5773Q2.04931 6.61617 4.33274 4.33274Q6.61617 2.04931 9.5773 0.796855Q12.6434 -0.500002 16 -0.500002L16 -0.5ZM16 0.499998Q12.8462 0.499998 9.96685 1.71786Q7.18536 2.89433 5.03984 5.03984Q2.89433 7.18535 1.71786 9.96685Q0.5 12.8462 0.499998 16Q0.499998 19.1538 1.71786 22.0331Q2.89433 24.8147 5.03984 26.9602Q7.18534 29.1057 9.96685 30.2821Q12.8462 31.5 16 31.5Q19.1538 31.5 22.0331 30.2821Q24.8147 29.1057 26.9602 26.9602Q29.1057 24.8147 30.2821 22.0331Q31.5 19.1538 31.5 16Q31.5 12.8462 30.2821 9.96685Q29.1057 7.18534 26.9602 5.03984Q24.8146 2.89434 22.0331 1.71786Q19.1538 0.5 16 0.5L16 0.499998Z\" fill-rule=\"nonzero\" transform=\"matrix(1 0 0 1 3.5 3.5)\" fill=\"#2569ed\"/>\n        <path d=\"M-0.5 -0.5L38.5 -0.5L38.5 38.5L-0.5 38.5L-0.5 -0.5ZM0.5 0.5L0.5 37.5L37.5 37.5L37.5 0.5L0.5 0.5Z\" fill-rule=\"nonzero\" transform=\"matrix(1 0 0 1 0.5 0.5)\" fill=\"#2569ed\"/>\n        </g>\n      </svg>\n      <span class=\"logo-text\">Jason Swetzoff</span>\n      </a>\n      </div>\n      <button class=\"menu-toggle\" aria-label=\"Toggle menu\">\n      <span class=\"plus-icon\">\n        <span class=\"vertical\"></span>\n        <span class=\"horizontal\"></span>\n      </span>\n      </button>\n      <nav>\n      <ul>\n   \n        <li><a href=\"${\n          isHomePage ? \"#\" : \"/index.html#\"\n        }featured-projects\" data-scroll=\"true\">Work</a></li>\n        <li><a href=\"${\n          isHomePage ? \"#\" : \"/index.html#\"\n        }about\" data-scroll=\"true\">About</a></li>\n        <li><a href=\"${\n          isHomePage ? \"#\" : \"/index.html#\"\n        }quotes\" data-scroll=\"true\">Testimonials</a></li>\n        <li><a href=\"https://www.linkedin.com/in/swetzoff/\" class=\"button\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"LinkedIn profile (opens in new tab)\">Say Hello!<svg class=\"external-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"m7 17 10-10\"></path><path d=\"M7 7h10v10\"></path></svg></a></li>\n\n      </ul>\n      </nav>\n    </div>\n    `;\n\n    // Add event listeners\n    const menuToggle = this.shadowRoot.querySelector(\".menu-toggle\");\n    const nav = this.shadowRoot.querySelector(\"nav\");\n\n    menuToggle.addEventListener(\"click\", (e) => {\n      e.preventDefault(); // Prevent any default behavior\n      e.stopPropagation(); // Stop event bubbling\n\n      this.isMenuOpen = !this.isMenuOpen;\n      menuToggle.classList.toggle(\"active\");\n      nav.classList.toggle(\"active\");\n\n      // Keep focus on the button after click\n      if (menuToggle instanceof HTMLElement) {\n        menuToggle.focus();\n      }\n    });\n\n    // Add smooth scrolling for section navigation (only on home page)\n    if (isHomePage) {\n      const scrollLinks = this.shadowRoot.querySelectorAll(\n        \"a[data-scroll=\\\"true\\\"]\"\n      );\n      scrollLinks.forEach((link) => {\n        link.addEventListener(\"click\", (e) => {\n          e.preventDefault();\n          const targetId = link.getAttribute(\"href\");\n          const targetElement = document.querySelector(targetId);\n\n          if (targetElement) {\n            // Close mobile menu if open\n            this.isMenuOpen = false;\n            menuToggle.classList.remove(\"active\");\n            nav.classList.remove(\"active\");\n\n            // Smooth scroll to target using native behavior\n            const targetId = link.getAttribute(\"href\");\n            if (targetId.startsWith(\"#\")) {\n              window.location.hash = targetId;\n            }\n          }\n        });\n      });\n\n      // Add scroll detection for active section highlighting\n      const sections = [\n        \"hero\",\n        \"featured-projects\",\n        \"about\",\n        \"quotes\",\n        \"footer\",\n      ];\n      this.updateActiveSection = () => {\n        const headerHeight = this.offsetHeight || 80;\n        const scrollPosition = window.scrollY + headerHeight + 100; // Increased offset for better detection\n\n        let activeSection = \"hero\"; // Default to hero\n\n        // Check sections in order they appear on page\n        for (const sectionId of sections) {\n          const sectionElement = document.querySelector(`#${sectionId}`);\n          if (\n            sectionElement instanceof HTMLElement &&\n            scrollPosition >= sectionElement.offsetTop\n          ) {\n            activeSection = sectionId;\n          }\n        }\n\n        // Update active states\n        scrollLinks.forEach((link) => {\n          const href = link.getAttribute(\"href\");\n          const targetSection = href.replace(/^.*#/, \"\"); // Extract section name from href\n          if (targetSection === activeSection) {\n            link.classList.add(\"active\");\n          } else {\n            link.classList.remove(\"active\");\n          }\n        });\n      };\n\n      // Set initial active section\n      this.updateActiveSection();\n\n      // Listen for scroll events\n      window.addEventListener(\"scroll\", this.updateActiveSection, {\n        passive: true,\n      });\n    }\n\n    // Handle scroll events\n    window.addEventListener(\"scroll\", this.handleScroll.bind(this));\n  }\n\n  handleScroll() {\n    const currentScrollY = window.scrollY;\n\n    if (currentScrollY > 10) {\n      // Changed from 50 to 10 for earlier animation\n      this.classList.add(\"scrolled\");\n    } else {\n      this.classList.remove(\"scrolled\");\n    }\n\n    this.lastScrollY = currentScrollY;\n  }\n\n  disconnectedCallback() {\n    // Clean up event listeners\n    if (this.updateActiveSection) {\n      window.removeEventListener(\"scroll\", this.updateActiveSection);\n    }\n    window.removeEventListener(\"scroll\", this.handleScroll.bind(this));\n  }\n}\n\nexport default SiteHeader;\n","/**\n * @class SiteFooter\n * @extends HTMLElement\n * @description Custom element for the site-wide footer.\n * It displays copyright information with a dynamically updated year.\n */\n// Issue #9: Enhance SiteFooter Component - Props, Events, and Accessibility\n// See: https://github.com/Jaswetz/jaswetz.github.io/issues/9\nclass SiteFooter extends HTMLElement {\n  _scrollHandler = null;\n\n  constructor() {\n    super();\n    this.attachShadow({ mode: \"open\" });\n  }\n\n  /**\n   * Called when the element is added to the document's DOM.\n   * Renders the footer structure and styles into the Shadow DOM.\n   * The current year is dynamically inserted into the copyright notice.\n   */\n  connectedCallback() {\n    const currentYear = new Date().getFullYear();\n    this.shadowRoot.innerHTML = /*html*/ `\n      <style>\n        /* Component-specific styles for the footer */\n        :host {\n          display: block;\n          margin-inline: auto;\n          min-height: calc(var(--space-l-3xl) * 2); /* Ensure footer has enough height */\n          position: relative; /* Ensure pseudo-element is positioned relative to the host */\n          top: calc(-1 * var(--space-l-3xl));\n          border-top: var(--border-width) solid var(--color-border);\n        }\n\n        :host::after {\n          content: \"\";\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          background-color: #f7f3eb;\n          background-image: radial-gradient(var(--color-primary) 0.7px, #f7f3eb 0.7px);\n          background-size: 14px 14px;\n          opacity: .7;\n          z-index: -1; /* Ensure it stays behind the content */\n        }\n\n        .footer-content {\n          width: var(--section-width);\n          display: grid;\n          grid-template-columns: 1fr;\n          gap: var(--space-xl); /* Add space between children */\n          padding: var(--space-xl) 0;\n          max-width: var(--max-width);\n          position: relative;\n          margin: 0 auto;\n          text-align: center;\n          min-height: inherit; /* Ensure it takes up the host's min-height */\n        }\n\n        .footer-content__text {\n          width: 100%;\n        }\n\n        .footer-tag {\n          font-weight: bold;\n          margin-bottom: 0;\n          padding: 0;\n        }\n\n        .made-with {\n          font-style: italic;\n          color: var(--color-text-light);\n          margin: 0;\n          padding: 0;\n          font-size: var(--size-step--1);\n         \n        }\n\n        .social-links__list {\n          list-style: none;\n          padding: 0;\n          margin: 0;\n          display: flex;\n          gap: var(--space-s);\n          justify-content: center;\n        }\n\n        a {\n          display: inline-flex;\n          cursor: pointer;\n          text-decoration: none;\n          transition: var(--transition-interactive);\n          position: relative;\n          overflow: hidden;\n          align-items: center;\n          justify-content: center;\n          background-color: transparent;\n          padding: var(--space-xs) var(--space-xs);\n          text-align: center;\n          border-radius: var(--border-radius);\n          color: var(--color-primary-hover);\n          border-color: var(--color-primary-hover);\n          font-family: var(--font-family-heading);\n        }\n\n        a:hover {\n          color: var(--color-primary);\n          border-color: var(--color-primary-alt);\n          transform: var(--hover-transform-small);\n        }\n\n        a::after {\n          content: \" \";\n          margin-left: 0.25em; /* Adjust spacing as needed */\n        }\n\n        a:focus {\n          outline: var(--focus-outline);\n          outline-offset: var(--focus-outline-offset);\n        }\n\n        .back-to-top {\n          position: fixed;\n          bottom: var(--space-l, 1.5rem);\n          right: var(--space-l, 1.5rem);\n          z-index: 1000;\n        }\n\n        .back-to-top__button {\n          background-color: var(--color-primary);\n          color: var(--color-background);\n          border: none;\n          border-radius: 50%;\n          width: 3rem;\n          height: 3rem;\n          font-size: 1.5rem;\n          line-height: 1;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          transition: transform 0.2s ease-out, opacity 0.2s ease-out, visibility 0.2s ease-out;\n          opacity: 0;\n          visibility: hidden;\n          transform: translateY(1rem);\n        }\n\n        .back-to-top__button:hover {\n          transform: var(--hover-transform-small);\n          background-color: var(--color-primary-alt);\n        }\n\n        .back-to-top__button--visible {\n          opacity: 1;\n          visibility: visible;\n          transform: translateY(0);\n        }\n\n        @media (min-width: 64rem) {\n          .footer-content {\n            grid-template-columns: 1fr 1fr; /* Keep 2 per row on large screens */\n            text-align: left;\n          }\n\n          .social-links {\n            display: flex;\n            align-items: center; /* Vertically center grid items */\n            justify-content: flex-start;\n          }\n\n          .social-links__list {\n            justify-content: flex-end;\n            display: block;\n          }\n        }\n      </style>\n      <footer class=\"footer-content\">\n        <div class=\"footer-content__text\">\n          <p class=\"footer-tag\">\n            &copy; <span id=\"current-year\">${currentYear}</span> Jason Swetzoff. All rights reserved.\n          </p>\n          <p class=\"made-with\">\n            Designed and Hand-coded by Jason Swetzoff with HTML, CSS, JS, Parcel and AI.\n          </p>\n        </div>\n\n        <nav class=\"social-links\">\n          <ul class=\"social-links__list\">\n            <li>\n              <a id=\"contact-link\" href=\"mailto:swetzoff@gmail.com\" class=\"button\">\n                Email\n              </a>\n            </li>\n            <li>\n              <a\n                href=\"http://www.linkedin.com/in/swetzoff\"\n                aria-label=\"Jason's LinkedIn Profile\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                class=\"button\"\n              >\n                LinkedIn\n              </a>\n            </li>\n            <li>\n              <a\n                href=\"https://github.com/Jaswetz\"\n                aria-label=\"Jason's GitHub Profile\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                class=\"button\"\n              >\n                GitHub\n              </a>\n            </li>\n          </ul>\n        </nav>\n      </footer>\n      <div class=\"back-to-top\">\n        <button id=\"back-to-top-btn\" class=\"back-to-top__button\" aria-label=\"Back to top\" title=\"Back to top\">\n            &uarr;\n        </button>\n      </div>\n    `;\n    this._setupBackToTop();\n  }\n\n  /**\n   * Sets up the \"back to top\" button functionality.\n   * It adds event listeners for clicking the button to scroll to the top,\n   * and for showing/hiding the button based on the window's scroll position.\n   * @private\n   */\n  _setupBackToTop() {\n    const backToTopButton = this.shadowRoot.querySelector(\"#back-to-top-btn\");\n    if (!backToTopButton) return;\n\n    backToTopButton.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      window.scrollTo({ top: 0, behavior: \"smooth\" });\n    });\n\n    this._scrollHandler = () => {\n      const isVisible = window.scrollY > window.innerHeight;\n      backToTopButton.classList.toggle(\n        \"back-to-top__button--visible\",\n        isVisible\n      );\n    };\n\n    window.addEventListener(\"scroll\", this._scrollHandler, { passive: true });\n    this._scrollHandler(); // Initial check\n  }\n\n  disconnectedCallback() {\n    if (this._scrollHandler) {\n      window.removeEventListener(\"scroll\", this._scrollHandler);\n    }\n  }\n\n  // Future: observedAttributes and attributeChangedCallback if props are needed.\n}\n\nexport default SiteFooter;\n","/**\n * Sidebar Navigation Component\n * Handles scroll spy functionality to highlight active navigation items\n * based on the current section in view.\n */\n\nclass SidebarNavigation {\n  constructor() {\n    this.sidebarNav = document.querySelector(\".sidebar-nav\");\n    this.navLinks = [];\n    this.sections = [];\n    this.currentActiveLink = null;\n    this.observer = null;\n\n    this.init();\n  }\n\n  init() {\n    if (!this.sidebarNav) {\n      return; // No sidebar navigation found\n    }\n\n    this.setupNavLinks();\n    this.setupIntersectionObserver();\n    this.bindEvents();\n  }\n\n  setupNavLinks() {\n    // Get all navigation links\n    const links = this.sidebarNav.querySelectorAll(\"a[href^=\\\"#\\\"]\");\n    links.forEach((link) => {\n      const targetId = link.getAttribute(\"href\").substring(1);\n      const targetSection = document.getElementById(targetId);\n\n      if (targetSection) {\n        this.navLinks.push({\n          link: link,\n          section: targetSection,\n          id: targetId,\n        });\n        this.sections.push(targetSection);\n      }\n    });\n  }\n\n  setupIntersectionObserver() {\n    // Create intersection observer to track when sections come into view\n    const options = {\n      root: null,\n      rootMargin: \"-20% 0px -60% 0px\", // Trigger when section is 20% from top\n      threshold: 0,\n    };\n\n    this.observer = new IntersectionObserver((entries) => {\n      this.handleIntersection(entries);\n    }, options);\n\n    // Observe all sections\n    this.sections.forEach((section) => {\n      this.observer.observe(section);\n    });\n  }\n\n  handleIntersection(entries) {\n    entries.forEach((entry) => {\n      if (entry.isIntersecting) {\n        this.setActiveLink(entry.target.id);\n      }\n    });\n  }\n\n  setActiveLink(sectionId) {\n    // Remove active class from all links\n    this.navLinks.forEach(({ link }) => {\n      link.classList.remove(\"active\");\n    });\n\n    // Add active class to current link\n    const activeNavItem = this.navLinks.find(({ id }) => id === sectionId);\n    if (activeNavItem) {\n      activeNavItem.link.classList.add(\"active\");\n      this.currentActiveLink = activeNavItem.link;\n    } else {\n    }\n  }\n\n  bindEvents() {\n    // Smooth scroll when clicking navigation links\n    this.navLinks.forEach(({ link, section }) => {\n      link.addEventListener(\"click\", (e) => {\n        e.preventDefault();\n\n        // Remove active from all links\n        this.navLinks.forEach(({ link: navLink }) => {\n          navLink.classList.remove(\"active\");\n        });\n\n        // Add active to clicked link\n        link.classList.add(\"active\");\n\n        // Smooth scroll to section\n        section.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"start\",\n        });\n      });\n    });\n\n    // Handle initial load - set active link based on URL hash\n    if (window.location.hash) {\n      const initialSection = window.location.hash.substring(1);\n      setTimeout(() => {\n        this.setActiveLink(initialSection);\n      }, 100);\n    } else {\n      // If no hash, activate first link\n      setTimeout(() => {\n        if (this.navLinks.length > 0) {\n          this.setActiveLink(this.navLinks[0].id);\n        }\n      }, 100);\n    }\n  }\n\n  destroy() {\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n  }\n}\n\nexport default SidebarNavigation;\n","/**\n * ImageLightbox Web Component\n *\n * A accessible lightbox modal for viewing case study images in full size.\n * Supports keyboard navigation, touch gestures, and maintains WCAG 2.1 Level AA compliance.\n *\n * Features:\n * - Click on images to open in lightbox\n * - Keyboard navigation (ESC to close, arrow keys for navigation)\n * - Touch/swipe gestures on mobile\n * - Focus management for accessibility\n * - Image captions support\n * - Responsive design\n *\n * @extends HTMLElement\n */\nclass ImageLightbox extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: \"open\" });\n\n    // State management\n    this.isOpen = false;\n    this.currentImageIndex = 0;\n    this.images = [];\n    this.originalFocusElement = null;\n\n    // Touch handling for mobile gestures\n    this.touchStartX = 0;\n    this.touchStartY = 0;\n    this.minSwipeDistance = 50;\n\n    // Bind methods to preserve context\n    this.handleKeydown = this.handleKeydown.bind(this);\n    this.handleBackdropClick = this.handleBackdropClick.bind(this);\n    this.handleTouchStart = this.handleTouchStart.bind(this);\n    this.handleTouchEnd = this.handleTouchEnd.bind(this);\n    this.handleImageClick = this.handleImageClick.bind(this);\n    this.handleResize = this.handleResize.bind(this);\n  }\n\n  connectedCallback() {\n    this.render();\n    this.initializeImageListeners();\n    this.addLightboxHint();\n\n    // Add resize listener for responsive behavior\n    window.addEventListener(\"resize\", this.handleResize);\n  }\n\n  disconnectedCallback() {\n    // Clean up event listeners\n    window.removeEventListener(\"resize\", this.handleResize);\n    this.removeImageListeners();\n\n    // Remove global listeners if lightbox is open\n    if (this.isOpen) {\n      document.removeEventListener(\"keydown\", this.handleKeydown);\n    }\n  }\n\n  render() {\n    this.shadowRoot.innerHTML = /*html*/ `\n      <style>\n        /* language=CSS */\n\n        .lightbox {\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          background: var(--lightbox-bg);\n          z-index: var(--lightbox-z-index);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          opacity: 0;\n          visibility: hidden;\n          transition: var(--lightbox-transition);\n          padding: var(--space-m);\n          box-sizing: border-box;\n        }\n\n        .lightbox--open {\n          opacity: 1;\n          visibility: visible;\n        }\n\n        .lightbox__container {\n          position: relative;\n          max-width: 90vw;\n          max-height: 90vh;\n          display: flex;\n          flex-direction: column;\n          transform: scale(0.8);\n          transition: var(--lightbox-transition);\n        }\n\n        .lightbox--open .lightbox__container {\n          transform: scale(1);\n        }\n\n        .lightbox__image {\n          max-width: 100%;\n          max-height: calc(90vh - 4rem); /* Reserve space for caption */\n          object-fit: contain;\n          border-radius: var(--border-radius-sm);\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n        }\n\n        .lightbox__caption {\n            font-size: var(--size-step--1);\n            color: var(--color-surface);\n            margin-top: var(--space-xs);\n            margin-left: var(--space-xs);\n            font-style: italic;\n            line-height: var(--leading);\n            text-align: center;\n        }\n\n        .lightbox__caption:empty {\n          display: none;\n        }\n\n        .lightbox__instructions {\n          position: absolute;\n          left: -10000px;\n          width: 1px;\n          height: 1px;\n          overflow: hidden;\n          clip: rect(0, 0, 0, 0);\n          clip-path: inset(50%);\n          white-space: nowrap;\n        }\n\n        /* Navigation buttons */\n        .lightbox__nav {\n          position: absolute;\n          top: 50%;\n          transform: translateY(-50%);\n          width: var(--touch-target-min);\n          height: var(--touch-target-min);\n          background: var(--button-bg);\n          border: none;\n          border-radius: 50%;\n          color: var(--button-color);\n          cursor: var(--button-cursor);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 1.5rem;\n          font-weight: bold;\n          transition: var(--button-transition);\n          backdrop-filter: blur(4px);\n          -webkit-backdrop-filter: blur(4px);\n        }\n\n        .lightbox__nav:hover {\n          background: var(--button-bg-hover);\n          transform: translateY(-50%) scale(1.1);\n        }\n\n        .lightbox__nav:focus {\n          outline: var(--focus-outline);\n          outline-offset: var(--focus-outline-offset);\n        }\n\n        .lightbox__nav:disabled {\n          opacity: var(--disabled-opacity);\n          cursor: var(--disabled-cursor);\n        }\n\n        .lightbox__nav:disabled:hover {\n          transform: translateY(-50%) scale(1);\n          background: var(--button-bg);\n        }\n\n        .lightbox__nav--prev {\n          left: var(--space-m);\n        }\n\n        .lightbox__nav--next {\n          right: var(--space-m);\n        }\n\n        .lightbox__nav--single {\n          display: none;\n        }\n\n        /* Close button */\n        .lightbox__close {\n          position: absolute;\n          top: var(--space-m);\n          right: var(--space-m);\n          width: var(--touch-target-min);\n          height: var(--touch-target-min);\n          background: var(--button-bg);\n          border: none;\n          border-radius: 50%;\n          color: var(--button-color);\n          cursor: var(--button-cursor);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 1.5rem;\n          font-weight: bold;\n          transition: var(--button-transition);\n          backdrop-filter: blur(4px);\n          -webkit-backdrop-filter: blur(4px);\n        }\n\n        .lightbox__close:hover {\n          background: var(--button-bg-hover);\n          transform: scale(1.1);\n        }\n\n        .lightbox__close:focus {\n          outline: var(--focus-outline);\n          outline-offset: var(--focus-outline-offset);\n        }\n\n        /* Mobile responsiveness */\n        @media (max-width: 768px) {\n          .lightbox {\n            padding: var(--space-s);\n          }\n\n          .lightbox__container {\n            max-width: 95vw;\n            max-height: 95vh;\n          }\n\n          .lightbox__image {\n            max-height: calc(95vh - 3rem);\n          }\n\n          .lightbox__nav {\n            width: var(--touch-target-small);\n            height: var(--touch-target-small);\n            font-size: 1.2rem;\n          }\n\n          .lightbox__close {\n            width: var(--touch-target-small);\n            height: var(--touch-target-small);\n            font-size: 1.2rem;\n          }\n\n          .lightbox__nav--prev {\n            left: var(--space-s);\n          }\n\n          .lightbox__nav--next {\n            right: var(--space-s);\n          }\n\n          .lightbox__close {\n            top: var(--space-s);\n            right: var(--space-s);\n          }\n        }\n\n        /* Loading state */\n        .lightbox__image--loading {\n          opacity: 0.5;\n        }\n\n        /* Prefers reduced motion */\n        @media (prefers-reduced-motion: reduce) {\n          .lightbox,\n          .lightbox__container,\n          .lightbox__nav,\n          .lightbox__close {\n            transition: none;\n          }\n        }\n\n        /* High contrast mode support */\n        @media (prefers-contrast: high) {\n          .lightbox__nav,\n          .lightbox__close {\n            background: rgba(255, 255, 255, 0.95);\n            color: #000000;\n            border: 2px solid #000000;\n          }\n\n          .lightbox__caption {\n            background: rgba(0, 0, 0, 0.95);\n            color: #ffffff;\n            padding: var(--space-xs);\n            border-radius: var(--border-radius-sm);\n          }\n\n          .lightbox {\n            background: rgba(0, 0, 0, 0.95);\n          }\n        }\n\n        /* Ensure minimum contrast ratios */\n        .lightbox__nav,\n        .lightbox__close {\n          background: rgba(0, 0, 0, 0.8);\n          color: #ffffff;\n        }\n\n        .lightbox__nav:hover,\n        .lightbox__close:hover {\n          background: rgba(0, 0, 0, 0.9);\n        }\n\n        .lightbox__nav:focus,\n        .lightbox__close:focus {\n          background: rgba(0, 0, 0, 0.9);\n          outline: 3px solid #ffffff;\n          outline-offset: 2px;\n        }\n      </style>\n\n      <div class=\"lightbox\" role=\"dialog\" aria-modal=\"true\" aria-hidden=\"true\" aria-labelledby=\"lightbox-caption\" aria-describedby=\"lightbox-instructions\">\n        <div class=\"lightbox__container\">\n          <button class=\"lightbox__close\" type=\"button\" aria-label=\"Close lightbox (Escape key)\">\n            \n          </button>\n          \n          <button class=\"lightbox__nav lightbox__nav--prev\" type=\"button\" aria-label=\"Previous image (Left arrow key)\">\n            \n          </button>\n          \n          <img class=\"lightbox__image\" alt=\"\" role=\"img\" />\n          \n          <button class=\"lightbox__nav lightbox__nav--next\" type=\"button\" aria-label=\"Next image (Right arrow key)\">\n            \n          </button>\n          \n          <p class=\"lightbox__caption\" id=\"lightbox-caption\"></p>\n          <div class=\"lightbox__instructions\" id=\"lightbox-instructions\" aria-live=\"polite\" aria-atomic=\"true\">\n            Use arrow keys to navigate between images, or Escape to close.\n          </div>\n        </div>\n      </div>\n    `;\n\n    // Get DOM references\n    this.lightboxEl = this.shadowRoot.querySelector(\".lightbox\");\n    this.containerEl = this.shadowRoot.querySelector(\".lightbox__container\");\n    this.imageEl = /** @type {HTMLImageElement} */ (\n      this.shadowRoot.querySelector(\".lightbox__image\")\n    );\n    this.captionEl = this.shadowRoot.querySelector(\".lightbox__caption\");\n    this.instructionsEl = this.shadowRoot.querySelector(\n      \".lightbox__instructions\"\n    );\n    this.closeBtn = /** @type {HTMLButtonElement} */ (\n      this.shadowRoot.querySelector(\".lightbox__close\")\n    );\n    this.prevBtn = /** @type {HTMLButtonElement} */ (\n      this.shadowRoot.querySelector(\".lightbox__nav--prev\")\n    );\n    this.nextBtn = /** @type {HTMLButtonElement} */ (\n      this.shadowRoot.querySelector(\".lightbox__nav--next\")\n    );\n\n    // Add event listeners\n    this.lightboxEl.addEventListener(\"click\", this.handleBackdropClick);\n    this.closeBtn.addEventListener(\"click\", () => this.close());\n    this.prevBtn.addEventListener(\"click\", () => this.showPrevious());\n    this.nextBtn.addEventListener(\"click\", () => this.showNext());\n\n    // Touch events for mobile gestures\n    this.containerEl.addEventListener(\"touchstart\", this.handleTouchStart, {\n      passive: false,\n    });\n    this.containerEl.addEventListener(\"touchend\", this.handleTouchEnd, {\n      passive: false,\n    });\n  }\n\n  /**\n   * Add a visually hidden hint element for screen readers\n   */\n  addLightboxHint() {\n    // Check if hint element already exists\n    if (document.getElementById(\"lightbox-hint\")) return;\n\n    const hint = document.createElement(\"div\");\n    hint.id = \"lightbox-hint\";\n    hint.style.position = \"absolute\";\n    hint.style.left = \"-10000px\";\n    hint.style.width = \"1px\";\n    hint.style.height = \"1px\";\n    hint.style.overflow = \"hidden\";\n    hint.style.clip = \"rect(0, 0, 0, 0)\";\n    hint.style.clipPath = \"inset(50%)\";\n    hint.style.whiteSpace = \"nowrap\";\n    hint.textContent = \"Click or press Enter to view in lightbox\";\n\n    document.body.appendChild(hint);\n  }\n\n  /**\n   * Initialize click listeners on all images within the page\n   */\n  initializeImageListeners() {\n    // Find all images in figures that should be lightboxed\n    const figures = document.querySelectorAll(\n      \"figure img.project__img, figure img.project-summary__image\"\n    );\n\n    figures.forEach((_img, index) => {\n      const img = /** @type {HTMLImageElement} */ (_img);\n      // Store image data\n      const figure = img.closest(\"figure\");\n      const caption = figure ? figure.querySelector(\"figcaption\") : null;\n\n      this.images.push({\n        src: img.src,\n        alt: img.alt,\n        caption: caption ? caption.textContent.trim() : \"\",\n        originalElement: img,\n      });\n\n      // Add click listener\n      img.addEventListener(\"click\", (e) => this.handleImageClick(e, index));\n\n      // Add visual indicator that image is clickable\n      img.style.cursor = \"pointer\";\n      img.setAttribute(\"role\", \"button\");\n      img.setAttribute(\"tabindex\", \"0\");\n      img.setAttribute(\n        \"aria-label\",\n        `View larger image: ${img.alt || \"Unlabeled image\"}`\n      );\n      img.setAttribute(\"aria-describedby\", \"lightbox-hint\");\n\n      // Add keyboard support for image activation\n      img.addEventListener(\"keydown\", (e) => {\n        const keyEvent = /** @type {KeyboardEvent} */ (e);\n        if (keyEvent.key === \"Enter\" || keyEvent.key === \" \" || keyEvent.key === \"Space\") {\n          e.preventDefault();\n          this.handleImageClick(e, index);\n        }\n      });\n    });\n  }\n\n  /**\n   * Remove all image click listeners\n   */\n  removeImageListeners() {\n    this.images.forEach((imageData) => {\n      if (imageData.originalElement) {\n        imageData.originalElement.removeEventListener(\n          \"click\",\n          this.handleImageClick\n        );\n        imageData.originalElement.removeEventListener(\n          \"keydown\",\n          this.handleImageClick\n        );\n        imageData.originalElement.style.cursor = \"\";\n        imageData.originalElement.removeAttribute(\"role\");\n        imageData.originalElement.removeAttribute(\"tabindex\");\n        imageData.originalElement.removeAttribute(\"aria-label\");\n      }\n    });\n  }\n\n  /**\n   * Handle image click events\n   */\n  handleImageClick(event, index) {\n    event.preventDefault();\n    this.open(index);\n  }\n\n  /**\n   * Handle backdrop clicks to close lightbox\n   */\n  handleBackdropClick(event) {\n    if (event.target === this.lightboxEl) {\n      this.close();\n    }\n  }\n\n  /**\n   * Handle keyboard navigation\n   */\n  handleKeydown(event) {\n    if (!this.isOpen) return;\n\n    switch (event.key) {\n      case \"Escape\":\n        event.preventDefault();\n        this.close();\n        break;\n      case \"ArrowLeft\":\n        event.preventDefault();\n        this.showPrevious();\n        break;\n      case \"ArrowRight\":\n        event.preventDefault();\n        this.showNext();\n        break;\n      case \"Tab\":\n        // Trap focus within the lightbox\n        this.trapFocus(event);\n        break;\n      case \"Home\":\n        event.preventDefault();\n        if (this.images.length > 0) {\n          this.loadImage(0);\n          this.currentImageIndex = 0;\n          this.updateNavigation();\n          this.announceToScreenReader(\n            `First image. Image 1 of ${this.images.length}.`\n          );\n        }\n        break;\n      case \"End\":\n        event.preventDefault();\n        if (this.images.length > 0) {\n          const lastIndex = this.images.length - 1;\n          this.loadImage(lastIndex);\n          this.currentImageIndex = lastIndex;\n          this.updateNavigation();\n          this.announceToScreenReader(\n            `Last image. Image ${this.images.length} of ${this.images.length}.`\n          );\n        }\n        break;\n    }\n  }\n\n  /**\n   * Trap focus within the lightbox for accessibility\n   */\n  trapFocus(event) {\n    const focusableElements = this.shadowRoot.querySelectorAll(\n      \"button:not([disabled]), [tabindex]:not([tabindex=\\\"-1\\\"])\"\n    );\n    const firstFocusable = /** @type {HTMLElement} */ (focusableElements[0]);\n    const lastFocusable = /** @type {HTMLElement} */ (\n      focusableElements[focusableElements.length - 1]\n    );\n\n    if (event.shiftKey && document.activeElement === firstFocusable) {\n      event.preventDefault();\n      lastFocusable.focus();\n    } else if (!event.shiftKey && document.activeElement === lastFocusable) {\n      event.preventDefault();\n      firstFocusable.focus();\n    }\n  }\n\n  /**\n   * Handle touch start for mobile gestures\n   */\n  handleTouchStart(event) {\n    this.touchStartX = event.touches[0].clientX;\n    this.touchStartY = event.touches[0].clientY;\n  }\n\n  /**\n   * Handle touch end for mobile gestures\n   */\n  handleTouchEnd(event) {\n    if (!this.touchStartX || !this.touchStartY) return;\n\n    const touchEndX = event.changedTouches[0].clientX;\n    const touchEndY = event.changedTouches[0].clientY;\n    const deltaX = this.touchStartX - touchEndX;\n    const deltaY = this.touchStartY - touchEndY;\n\n    // Check if it's a horizontal swipe (not vertical scroll)\n    if (\n      Math.abs(deltaX) > Math.abs(deltaY) &&\n      Math.abs(deltaX) > this.minSwipeDistance\n    ) {\n      if (deltaX > 0) {\n        // Swiped left - show next image\n        this.showNext();\n      } else {\n        // Swiped right - show previous image\n        this.showPrevious();\n      }\n    }\n\n    // Reset touch coordinates\n    this.touchStartX = 0;\n    this.touchStartY = 0;\n  }\n\n  /**\n   * Handle window resize events\n   */\n  handleResize() {\n    // Could add logic here to adjust lightbox layout on resize if needed\n  }\n\n  /**\n   * Open the lightbox with a specific image\n   */\n  open(imageIndex = 0) {\n    if (this.images.length === 0) return;\n\n    this.currentImageIndex = Math.max(\n      0,\n      Math.min(imageIndex, this.images.length - 1)\n    );\n    this.isOpen = true;\n\n    // Store current focus element for restoration\n    this.originalFocusElement = document.activeElement;\n\n    // Prevent body scroll\n    document.body.style.overflow = \"hidden\";\n\n    // Show lightbox\n    this.lightboxEl.classList.add(\"lightbox--open\");\n    this.lightboxEl.setAttribute(\"aria-hidden\", \"false\");\n\n    // Load and display the image\n    this.loadImage(this.currentImageIndex);\n\n    // Update navigation buttons\n    this.updateNavigation();\n\n    // Add keyboard listener\n    document.addEventListener(\"keydown\", this.handleKeydown);\n\n    // Focus management - focus the close button\n    setTimeout(() => {\n      /** @type {HTMLButtonElement} */ (this.closeBtn).focus();\n    }, 100);\n\n    // Announce to screen readers with more detailed information\n    const totalImages = this.images.length;\n    const currentNum = this.currentImageIndex + 1;\n    const currentImage = this.images[this.currentImageIndex];\n\n    let announcement = `Lightbox opened. Viewing image ${currentNum} of ${totalImages}`;\n    if (currentImage.caption) {\n      announcement += `. Image caption: ${currentImage.caption}`;\n    }\n    if (totalImages > 1) {\n      announcement += \". Use arrow keys to navigate between images.\";\n    }\n    announcement += \" Press Escape to close.\";\n\n    this.announceToScreenReader(announcement);\n  }\n\n  /**\n   * Close the lightbox\n   */\n  close() {\n    if (!this.isOpen) return;\n\n    this.isOpen = false;\n\n    // Restore body scroll\n    document.body.style.overflow = \"\";\n\n    // Hide lightbox\n    this.lightboxEl.classList.remove(\"lightbox--open\");\n    this.lightboxEl.setAttribute(\"aria-hidden\", \"true\");\n\n    // Remove keyboard listener\n    document.removeEventListener(\"keydown\", this.handleKeydown);\n\n    // Restore focus\n    if (this.originalFocusElement) {\n      /** @type {HTMLElement} */ (this.originalFocusElement).focus();\n      this.originalFocusElement = null;\n    }\n\n    // Announce to screen readers\n    this.announceToScreenReader(\"Lightbox closed.\");\n  }\n\n  /**\n   * Show the previous image\n   */\n  showPrevious() {\n    if (this.images.length <= 1) return;\n\n    const newIndex =\n      this.currentImageIndex > 0\n        ? this.currentImageIndex - 1\n        : this.images.length - 1;\n\n    this.loadImage(newIndex);\n    this.currentImageIndex = newIndex;\n    this.updateNavigation();\n\n    // More descriptive announcement for screen readers\n    const currentImage = this.images[this.currentImageIndex];\n    let announcement = `Previous image. Now viewing image ${\n      this.currentImageIndex + 1\n    } of ${this.images.length}`;\n    if (currentImage.caption) {\n      announcement += `. ${currentImage.caption}`;\n    }\n    this.announceToScreenReader(announcement);\n  }\n\n  /**\n   * Show the next image\n   */\n  showNext() {\n    if (this.images.length <= 1) return;\n\n    const newIndex =\n      this.currentImageIndex < this.images.length - 1\n        ? this.currentImageIndex + 1\n        : 0;\n\n    this.loadImage(newIndex);\n    this.currentImageIndex = newIndex;\n    this.updateNavigation();\n\n    // More descriptive announcement for screen readers\n    const currentImage = this.images[this.currentImageIndex];\n    let announcement = `Next image. Now viewing image ${\n      this.currentImageIndex + 1\n    } of ${this.images.length}`;\n    if (currentImage.caption) {\n      announcement += `. ${currentImage.caption}`;\n    }\n    this.announceToScreenReader(announcement);\n  }\n\n  /**\n   * Load an image by index\n   */\n  loadImage(index) {\n    if (!this.images[index]) return;\n\n    const imageData = this.images[index];\n\n    // Add loading state\n    this.imageEl.classList.add(\"lightbox__image--loading\");\n\n    // Create a new image to preload and check if it loads successfully\n    const tempImage = new Image();\n\n    tempImage.onload = () => {\n      // Only set the src after we know the image loads\n      this.imageEl.src = imageData.src;\n      this.imageEl.alt =\n        imageData.alt || `Image ${index + 1} of ${this.images.length}`;\n      this.imageEl.classList.remove(\"lightbox__image--loading\");\n\n      // Update ARIA label for better context\n      this.imageEl.setAttribute(\n        \"aria-label\",\n        imageData.alt\n          ? `${imageData.alt}. Image ${index + 1} of ${this.images.length}`\n          : `Image ${index + 1} of ${this.images.length}`\n      );\n    };\n\n    tempImage.onerror = () => {\n      console.warn(`Failed to load image: ${imageData.src}`);\n      // Still set the src and remove loading state to show broken image\n      this.imageEl.src = imageData.src;\n      this.imageEl.alt = imageData.alt;\n      this.imageEl.classList.remove(\"lightbox__image--loading\");\n\n      // Update ARIA label for error state\n      this.imageEl.setAttribute(\n        \"aria-label\",\n        `Failed to load image ${index + 1} of ${this.images.length}${\n          imageData.alt ? `: ${imageData.alt}` : \"\"\n        }`\n      );\n\n      // Announce error to screen readers\n      this.announceToScreenReader(\n        `Error loading image ${index + 1}. ${\n          imageData.alt || \"No description available\"\n        }.`\n      );\n    };\n\n    // Start loading the image\n    tempImage.src = imageData.src;\n\n    // Update caption\n    this.captionEl.textContent = imageData.caption;\n  }\n\n  /**\n   * Update navigation button states\n   */\n  updateNavigation() {\n    const hasMultipleImages = this.images.length > 1;\n\n    // Show/hide navigation buttons based on image count\n    if (hasMultipleImages) {\n      this.prevBtn.classList.remove(\"lightbox__nav--single\");\n      this.nextBtn.classList.remove(\"lightbox__nav--single\");\n    } else {\n      this.prevBtn.classList.add(\"lightbox__nav--single\");\n      this.nextBtn.classList.add(\"lightbox__nav--single\");\n    }\n\n    // Update button states (for future implementation of linear navigation)\n    this.prevBtn.disabled = false; // Enable cycling\n    this.nextBtn.disabled = false; // Enable cycling\n  }\n\n  /**\n   * Announce messages to screen readers\n   * @param {string} message - The message to announce\n   * @param {string} priority - The aria-live priority ('polite' or 'assertive')\n   */\n  announceToScreenReader(message, priority = \"polite\") {\n    // Create a temporary element for screen reader announcements\n    const announcement = document.createElement(\"div\");\n    announcement.setAttribute(\"aria-live\", priority);\n    announcement.setAttribute(\"aria-atomic\", \"true\");\n    announcement.style.position = \"absolute\";\n    announcement.style.left = \"-10000px\";\n    announcement.style.width = \"1px\";\n    announcement.style.height = \"1px\";\n    announcement.style.overflow = \"hidden\";\n    announcement.style.clip = \"rect(0, 0, 0, 0)\";\n    announcement.style.clipPath = \"inset(50%)\";\n    announcement.style.whiteSpace = \"nowrap\";\n\n    document.body.appendChild(announcement);\n\n    // Add the message after a brief delay to ensure it's announced\n    setTimeout(() => {\n      announcement.textContent = message;\n    }, 10);\n\n    // Remove the announcement element after a short delay\n    setTimeout(() => {\n      if (announcement.parentNode) {\n        document.body.removeChild(announcement);\n      }\n    }, 1500);\n  }\n}\n\n// Register the custom element\ncustomElements.define(\"image-lightbox\", ImageLightbox);\n\nexport default ImageLightbox;\n","// Issue #7: Implement a robust solution for unsupported browsers (Requirement 3.2)\n// See: https://github.com/Jaswetz/jaswetz.github.io/issues/7\n// Main JavaScript file with Advanced Analytics System\n\nimport \"../css/main.css\";\nimport \"./analytics/simple-analytics.js\";\nimport \"./clarity-config.js\";\nimport SmartImageLoader from \"./smart-image-loader.js\";\nimport SiteHeader from \"./components/site-header/SiteHeader.js\";\nimport SiteFooter from \"./components/site-footer/SiteFooter.js\";\nimport SidebarNavigation from \"./components/sidebar-navigation/SidebarNavigation.js\";\nimport ImageLightbox from \"./components/ImageLightbox/ImageLightbox.js\";\n\n// Define the custom elements\nif (window.customElements) {\n  // Check if elements are already defined to prevent duplicate registration\n  if (!customElements.get(\"site-header\")) {\n    customElements.define(\"site-header\", SiteHeader);\n  }\n  if (!customElements.get(\"site-footer\")) {\n    customElements.define(\"site-footer\", SiteFooter);\n  }\n  if (!customElements.get(\"image-lightbox\")) {\n    customElements.define(\"image-lightbox\", ImageLightbox);\n  }\n} else {\n  console.warn(\n    \"Custom Elements are not supported in this browser. Site may not render correctly.\"\n  );\n  // Optionally, provide fallback rendering or messages here\n}\n\n//DOMContentLoaded is no longer needed for the year,\n//as it's handled within the SiteFooter component itself.\n//Any other global JS can go here or be further modularized.\n\n// Initialize sidebar navigation on pages that have it\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  if (document.querySelector(\".sidebar-nav\")) {\n    new SidebarNavigation();\n  }\n\n  // Add click functionality to the animated 2D logo\n  const logo2d = document.querySelector(\".logo-2d\");\n  if (logo2d !== null && logo2d instanceof HTMLElement) {\n    // Make the logo clickable by adding cursor pointer style\n    logo2d.style.cursor = \"pointer\";\n\n    // Add click event listener\n    logo2d.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n\n      // Find the featured projects section\n      const featuredProjectsSection =\n        document.querySelector(\"#featured-projects\");\n      if (featuredProjectsSection instanceof HTMLElement) {\n        // Smooth scroll to the featured projects section\n        featuredProjectsSection.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"start\",\n        });\n\n        // Optional: Update URL hash\n        window.history.pushState(null, null, \"#featured-projects\");\n      }\n    });\n\n    // Add keyboard accessibility (Enter and Space keys)\n    logo2d.addEventListener(\"keydown\", (e) => {\n      if (e instanceof KeyboardEvent && (e.key === \"Enter\" || e.key === \" \")) {\n        e.preventDefault();\n        logo2d.click(); // Trigger the click event\n      }\n    });\n\n    // Make it focusable for keyboard navigation\n    logo2d.setAttribute(\"tabindex\", \"0\");\n    logo2d.setAttribute(\"role\", \"button\");\n    logo2d.setAttribute(\"aria-label\", \"Scroll to featured projects section\");\n  }\n});\n\n// --- Debug Styles Toggle ---\ndocument.addEventListener(\"keydown\", function (event) {\n  // Check for Ctrl+Shift+D\n  if (event.ctrlKey && event.shiftKey && event.key === \"D\") {\n    event.preventDefault(); // Prevent default browser action for this shortcut\n\n    const body = document.body;\n    const layoutClass = \"debug-layout-outlines\";\n    const rhythmClass = \"debug-typographic-rhythm\";\n\n    // Toggle layout outlines\n    body.classList.toggle(layoutClass);\n    // Toggle typographic rhythm\n    body.classList.toggle(rhythmClass);\n\n    // Debug styles toggled (silent operation for production)\n  }\n});\n// --- End Debug Styles Toggle ---\n\n// Initialize Smart Image Loader for automatic WebP optimization\nconst smartImageLoader = new SmartImageLoader();\nsmartImageLoader.optimizePageImages();\n\n// Simple analytics system initialized automatically\n// Use window.portfolioAnalytics for manual tracking\n"],"names":["c","l","a","r","t","y","$8b8f4a56ad864ee1$export$71511d61b312f219","obj","key","value","Object","defineProperty","enumerable","configurable","writable","$4b81808ccd9bb38a$export$71511d61b312f219","target","i","arguments","length","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","forEach","$45aa6f35a50080d9$export$71511d61b312f219","getOwnPropertyDescriptors","defineProperties","object","enumerableOnly","symbols","push","apply","$45aa6f35a50080d9$var$ownKeys","$f89ea8d08716c0f2$var$analytics","init","this","isInitialized","_waitForGtag","fallbackMode","_configureGA4","_processQueue","_enableAutoTracking","error","_handleError","Promise","resolve","reject","window","gtag","attempts","checkGtag","setInterval","clearInterval","dataLayer","Date","measurementId","page_title","document","title","page_location","location","href","allow_ad_personalization_signals","allow_google_signals","send_page_view","_checkConsent","localStorage","getItem","e","setConsent","granted","setItem","consentGiven","_isDevelopment","hostname","port","addEventListener","hidden","trackTimeOnPage","maxScrollDepth","scrollDepth","Math","round","scrollY","documentElement","scrollHeight","innerHeight","trackScrollDepth","_sendToGA4","eventName","parameters","console","log","queue","context","warn","trackProjectClick","projectName","projectType","project_name","project_type","interaction_type","trackResumeDownload","file_name","file_type","trackContactForm","action","method","trackExternalLink","url","linkText","link_url","link_text","depth","scroll_depth","pageStartTime","now","timeSpent","time_spent_seconds","page_path","pathname","trackCaseStudyInteraction","caseStudyName","section","case_study_name","trackImageLightbox","imageName","caseStudy","image_name","case_study","trackCaseStudyCompletion","getStatus","initialized","isDevelopment","queueLength","constructor","options","bind","$f89ea8d08716c0f2$export$2e2bcd8739ae039","portfolioAnalytics","args","q","createElement","async","src","getElementsByTagName","parentNode","insertBefore","onerror","timestamp","toISOString","userAgent","navigator","referrer","note","clarityBlocked","onload","$3431b631d828ed8b$var$clarityTracker","waitForClarity","then","setupAutoTracking","trackSessionStart","clarity","checkClarity","setTimeout","generateSessionId","toString","random","substr","trackEvent","session_id","sessionId","user_agent","landing_page","properties","enhancedProperties","page_url","userJourney","event","trackConversionMilestone","milestone","details","conversionEvents","add","funnel_step","getFunnelStep","homepage_visit","hero_interaction","project_view","case_study_start","content_engagement","case_study_complete","contact_page_visit","resume_download","contact_form_start","contact_form_submit","external_link_click","return_visit","newsletter_signup","trackIntentSignal","signal","strength","intent_type","categorizeIntent","linkedin_click","portfolio_view","long_session","multiple_project_views","social_share","trackContentEngagement","contentType","contentId","content_type","content_id","engagement_duration","duration","trackMicroConversion","conversionType","conversion_type","conversion_category","getConversionCategory","case_study_view","project_click","scroll_depth_75","email_click","trackOutboundLinks","trackProjectInteractions","trackContactInteractions","trackContentMilestones","milestones","scrollPercent","has","seconds","duration_seconds","duration_minutes","link","closest","_link_textContent","URL","origin","destination_url","textContent","trim","link_type","getLinkType","includes","projectCard","_projectCard_querySelector_textContent","_projectCard_querySelector","querySelector","project_url","getProjectType","contactLink","_contactLink_textContent","getAttribute","linkType","contact_type","contact_url","observer","IntersectionObserver","entries","entry","isIntersecting","_section_querySelector_textContent","_section_querySelector","sectionId","id","sectionName","section_name","threshold","querySelectorAll","observe","getUserJourneySummary","total_events","conversion_events","Array","from","journey_duration","funnel_progress","max","map","split","slice","join","events","exportJourneyData","summary","full_journey","conversion_funnel","analyzeConversionFunnel","funnel","awareness","interest","some","consideration","retention","completion_rate","values","Boolean","bottleneck","identifyBottleneck","stages","Set","clarityTracking","type","$9005b139e37d8cdc$var$SmartImageLoader","getBestImagePath","imagePath","preferWebP","cleanPath","replace","supportsWebP","webpPath","webpBasePath","imageExists","optimizedPath","optimizedBasePath","fallbackBasePath","img","Image","canvas","width","height","toDataURL","indexOf","optimizePageImages","images","promises","imageElement","relativePath","all","smartLoader","readyState","smartImageLoader","$9005b139e37d8cdc$export$2e2bcd8739ae039","$9e968806eea7b831$var$SiteHeader","HTMLElement","connectedCallback","currentPath","isHomePage","endsWith","shadowRoot","innerHTML","menuToggle","nav","preventDefault","stopPropagation","isMenuOpen","classList","toggle","focus","scrollLinks","targetId","remove","startsWith","hash","sections","updateActiveSection","headerHeight","offsetHeight","scrollPosition","activeSection","sectionElement","offsetTop","passive","handleScroll","currentScrollY","lastScrollY","disconnectedCallback","removeEventListener","super","attachShadow","mode","$9e968806eea7b831$export$2e2bcd8739ae039","$d5409682bd36c064$var$SiteFooter","currentYear","getFullYear","_setupBackToTop","backToTopButton","scrollTo","top","behavior","_scrollHandler","isVisible","$d5409682bd36c064$export$2e2bcd8739ae039","$bcb429b3bd2e15b2$export$2e2bcd8739ae039","sidebarNav","setupNavLinks","setupIntersectionObserver","bindEvents","substring","targetSection","getElementById","navLinks","handleIntersection","root","rootMargin","setActiveLink","activeNavItem","find","currentActiveLink","navLink","scrollIntoView","block","initialSection","destroy","disconnect","$eadf2ca52a0c0377$var$ImageLightbox","render","initializeImageListeners","addLightboxHint","handleResize","removeImageListeners","isOpen","handleKeydown","lightboxEl","containerEl","imageEl","captionEl","instructionsEl","closeBtn","prevBtn","nextBtn","handleBackdropClick","close","showPrevious","showNext","handleTouchStart","handleTouchEnd","hint","style","position","left","overflow","clip","clipPath","whiteSpace","body","appendChild","_img","index","figure","caption","alt","originalElement","handleImageClick","cursor","setAttribute","keyEvent","imageData","removeAttribute","open","trapFocus","loadImage","currentImageIndex","updateNavigation","announceToScreenReader","lastIndex","focusableElements","firstFocusable","lastFocusable","shiftKey","activeElement","touchStartX","touches","clientX","touchStartY","clientY","touchEndX","changedTouches","touchEndY","deltaX","deltaY","abs","minSwipeDistance","imageIndex","min","originalFocusElement","totalImages","currentNum","currentImage","announcement","newIndex","tempImage","disabled","message","priority","removeChild","customElements","define","$eadf2ca52a0c0377$export$2e2bcd8739ae039","get","logo2d","featuredProjectsSection","history","pushState","KeyboardEvent","click","ctrlKey","layoutClass","rhythmClass"],"version":3,"file":"404.4c7be5e2.js.map"}