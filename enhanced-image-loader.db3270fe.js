(0,("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire9b4d.register)("bUb95",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0,configurable:!0}),Object.defineProperty(e.exports,"default",{get:function(){return a},set:void 0,enumerable:!0,configurable:!0});class i{constructor(){this.observer=null,this.loadedImages=new Set,this.webpSupported=null,this.initIntersectionObserver()}initIntersectionObserver(){"IntersectionObserver"in window&&(this.observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!this.loadedImages.has(e.target)&&this.loadImage(e.target)})},{rootMargin:"50px 0px",threshold:.1}))}supportsWebP(){return null!==this.webpSupported?this.webpSupported:new Promise(e=>{let t=new Image;t.onload=t.onerror=()=>{this.webpSupported=2===t.height,e(this.webpSupported)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"})}async loadImage(e){if(!(e instanceof HTMLImageElement))return;let t=e.dataset.src||e.src;if(t)try{e.classList.add("loading");let i=t;if(!/\.svg$/i.test(t)&&await this.supportsWebP()){let e=t.replace(/^(.*\/img\/)/,"$1webp/").replace(/\.(jpg|jpeg|png)$/i,".webp");await this.imageExists(e)&&(i=e)}e.onload=()=>{e.classList.remove("loading"),e.classList.add("loaded")},e.onerror=()=>{e.src=t,e.classList.remove("loading"),e.classList.add("error")},e.src=i,this.loadedImages.add(e)}catch(i){console.warn("Failed to load image:",t,i),e.src=t,e.classList.remove("loading"),e.classList.add("error")}}imageExists(e){return new Promise(t=>{let i=new Image;i.onload=()=>t(!0),i.onerror=()=>t(!1),i.src=e})}setupLazyLoading(){document.querySelectorAll("img[data-src]").forEach(e=>{this.observer?this.observer.observe(e):this.loadImage(e)})}preloadCriticalImages(){document.querySelectorAll("img[data-critical]").forEach(e=>{e instanceof HTMLImageElement&&this.loadImage(e)})}init(){this.preloadCriticalImages(),this.setupLazyLoading(),this.addLoadingStyles()}addLoadingStyles(){if(document.getElementById("enhanced-image-loader-styles"))return;let e=document.createElement("style");e.id="enhanced-image-loader-styles",e.textContent=`
      img.loading { opacity: 0; transition: opacity 0.3s ease-in-out; }
      img.loaded { opacity: 1; }
      img.error { opacity: 0.7; filter: grayscale(100%); }
      @media (prefers-reduced-motion: reduce) { img.loading { transition: none; } }
    `,document.head.appendChild(e)}getStats(){return{loadedImages:this.loadedImages.size,webpSupported:this.webpSupported,observerSupported:!!this.observer}}}if("undefined"!=typeof window){let e=new i;"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{e.init()}):e.init(),window.enhancedImageLoader=e}var a=i});
//# sourceMappingURL=enhanced-image-loader.db3270fe.js.map
